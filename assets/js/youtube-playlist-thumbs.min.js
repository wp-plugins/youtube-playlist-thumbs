function getPlaylistData(t,e,a){var n="AIzaSyArQNfmJDkjxP_ZyZIocbyuDeyTanf4Rl8",i="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId="+t+"&key="+n;a&&(i+="&pageToken="+a);var l=null;l=new XMLHttpRequest,l.open("GET",i,!0),l.send(null),l.onload=function(a){buildJSON(l.responseText,e,t)}}function buildJSON(t,e,a){var n=JSON.parse(t);e||(e=[]),e.push.apply(e,n.items),n.nextPageToken?getPlaylistData(a,e,n.nextPageToken):buildHTML(e)}function buildHTML(t){var e="";for(i=0;i<t.length;i++){var a=t[i].snippet;a.thumbnails&&(e+='<li data-ypt-index="'+i+'"><p>'+a.title+'</p><span><img alt="'+a.title+'" src="'+a.thumbnails.medium.url+'"/></span></li>')}ypt_thumbs.innerHTML=e}function yptThumbHeight(){ypt_thumbs.style.height=document.getElementById("player").clientHeight+"px"}function onPlayerReady(t){yptThumbHeight()}var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player,ypt_player=document.getElementById("player"),playlistID=ypt_player.getAttribute("data-pl"),ypt_thumbs=document.getElementById("ypt_thumbs"),nowPlaying="ypt-now-playing",nowPlayingClass="."+nowPlaying,ypt_index=0;getPlaylistData(playlistID),window.onYouTubeIframeAPIReady=function(){function t(t){var e=player.getPlaylistIndex(),a=ypt_thumbs.getElementsByTagName("li"),n=a[e];if(t.data==YT.PlayerState.PLAYING){for(var i=0;i<a.length;i++)a[i].className="";n.className=nowPlaying}t.data==YT.PlayerState.ENDED&&e==a.length-1&&a[e].className==nowPlaying&&jQuery.event.trigger("playlistEnd")}player=new YT.Player("player",{height:"360",width:"640",playerVars:{listType:"playlist",list:playlistID},events:{onReady:onPlayerReady,onStateChange:t}}),window.addEventListener("resize",function(t){yptThumbHeight()}),jQuery(document).on("click",'[data-ypt-index]:not(".ypt-now-playing")',function(t){ypt_index=Number(jQuery(this).attr("data-ypt-index")),navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?player.cuePlaylist({listType:"playlist",list:playlistID,index:ypt_index,suggestedQuality:"hd720"}):player.playVideoAt(ypt_index),jQuery(nowPlayingClass).removeClass(nowPlaying)})};
